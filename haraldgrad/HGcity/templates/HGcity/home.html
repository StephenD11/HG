<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–•–∞—Ä–∞–ª—å–¥–≥—Ä–∞–¥</title>
    {% load static %}

    <!-- –û–ø–∏—Å–∞–Ω–∏–µ –∏ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è –ø–æ–∏—Å–∫–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º -->
    <meta name="description" content="{% block description %}üîª –•–∞—Ä–∞–ª—å–¥–≥—Ä–∞–¥ ‚Äî –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –≥–æ—Ä–æ–¥ [WRP] üîª{% endblock %}">
    <meta name="keywords" content="{% block keywords %}GAME, WRP, ADVANTURE, HG{% endblock %}">

    <!-- Open Graph –¥–ª—è —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç–µ–π -->
    <meta property="og:title" content="–•–∞—Ä–∞–ª—å–¥–≥—Ä–∞–¥">
    <meta property="og:description" content="üîª –•–∞—Ä–∞–ª—å–¥–≥—Ä–∞–¥ ‚Äî –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –≥–æ—Ä–æ–¥ [WRP] üîª">
    <meta property="og:image" content="{% static '/images/hg.png' %}">
    <meta property="og:url" content="http://xaraldgrad.ru/">
    <meta property="og:type" content="website">

    <link rel="stylesheet" href="{% static 'HGcity/css/style.css' %}">
    <link rel="stylesheet" href="{% static 'HGcity/css/background.css' %}">
    <link rel="stylesheet" href="{% static 'HGcity/css/login.css' %}">
    <link rel="stylesheet" href="{% static 'HGcity/css/guide.css' %}">
    <link rel="stylesheet" href="{% static 'HGcity/css/media.css' %}">
    <link rel="icon" type="image/x-icon" href="{% static 'favicon.png' %}">


</head>
<body id="home-page">
<!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –≤—Å–µ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ -->
<div class="container">
    <!-- –ë–ª–æ–∫ —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º -->
    <div>
        <p class="special-text-K-home" style="color:#c41d1d66;">–•–ê–†–ê–õ–´–î–ì–†–ê–î</p>
    </div>

    <!-- –ù–∞—á–∞–ª—å–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è -->
    <img id="lightImage" src="{% static 'animations/doors/lights.webp' %}" alt="–°–≤–µ—Ç"
         style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; object-fit: cover; z-index: 9999; display: none; opacity: 0.2;">

    <div class="door-container">
        <img id="doorImage" class="door-image" src="{% static 'animations/doors/bunker_1.png' %}" alt="–ë—É–Ω–∫–µ—Ä">
        <video id="doorVideo" class="door-video" muted playsinline webkit-playsinline>
            <source src="{% static 'animations/doors/doors_high_open.mp4' %}" type="video/mp4">
            –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–∏–¥–µ–æ.
        </video>
    </div>

    <!-- –ë–ª–æ–∫ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∂–∏—Ç–µ–ª–µ–π -->
    <div>
        <p class="residents-count"><b style="color:#CD5C5C;">–ö–û–õ–ò–ß–ï–°–¢–í–û –ñ–ò–¢–ï–õ–ï–ô:</b> {{ user_count }}</p>
    </div>

    <!-- –ë–ª–æ–∫ —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π -->
    <div class="navigation-block">
        <nav>
            {% if user.is_authenticated %}
            <button onclick="openDoors()">–û—Ç–∫—Ä—ã—Ç—å –î–≤–µ—Ä–∏</button>
            {% else %}
            <button onclick="window.location.href='{% url 'HGcity:register' %}'">
                –†–ï–ì–ò–°–¢–†–ê–¶–ò–Ø
            </button>
            <button onclick="window.location.href='{% url 'HGcity:login' %}'">
                –í–•–û–î
            </button>
            <button onclick="window.location.href='{% url 'HGcity:about_close' %}'" style='font-size:10px;'>
                –û –ü–†–û–ï–ö–¢–ï
            </button>
            {% endif %}
        </nav>
    </div>

    <!-- –ó–≤—É–∫ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –¥–≤–µ—Ä–µ–π -->
    <audio id="door-sound" src="{% static 'HGcity/music/doors_sound.mp3' %}"></audio>
    <audio id="alarm-doors" src="{% static 'HGcity/music/alarm_doors.mp3' %}"></audio>

</div>

<audio id="background-music" src="{% static 'HGcity/music/music_guide_page.mp3' %}" loop></audio>

<div>
    {% if user.is_authenticated %}
    <button class="music-button" id="toggle-music" onclick="toggleMusic()">üîà</button>
    {% else %}
    <button class="music-button" id="toggle-music" onclick="toggleMusic()">üîà</button>
    {% endif %}
</div>


<script>
    const lightImage = document.getElementById('lightImage');
    const audioElement = document.getElementById('background-music');
    const toggleButton = document.getElementById('toggle-music');
    const doorImage = document.getElementById('doorImage');
    const doorVideo = document.getElementById('doorVideo');
    const doorSound = document.getElementById('door-sound');
    const doorAlertSound = document.getElementById('alarm-doors');
    doorSound.volume = 0.4;
    doorAlertSound.volume = 0.3;
    audioElement.volume = 0.3;

    let isPlaying = false;

    function toggleMusic() {
        if (isPlaying) {
            audioElement.pause();
            toggleButton.textContent = 'üîä';
        } else {
            audioElement.play();
            toggleButton.textContent = 'üîà';
        }
        isPlaying = !isPlaying;
    }

    // –í–∫–ª—é—á–∞–µ–º –º—É–∑—ã–∫—É –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∫–ª–∏–∫–µ
    document.addEventListener("click", function() {
        if (audioElement.paused) {
            audioElement.play();
            isPlaying = true;
            toggleButton.textContent = 'üîà';
        }
    }, { once: true }); // –¢–æ–ª—å–∫–æ –æ–¥–Ω–æ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–µ

    function openDoors() {
        doorSound.play();
        doorAlertSound.play();

        setTimeout(function() {
            lightImage.style.display = 'block';
        }, 0);

        audioElement.pause();

        doorImage.style.display = 'none';
        doorVideo.style.display = 'block';
        doorVideo.play();

        setTimeout(function () {
            window.location.href = '{% url 'HGcity:guide_page' %}';
        }, 4500); // –ü–æ–¥–≥–æ–Ω—è–π –≤—Ä–µ–º—è –ø–æ–¥ –¥–ª–∏–Ω—É –≤–∏–¥–µ–æ
    }
</script>

<!-- –§—É—Ç–µ—Ä -->
<footer class="footer-block">
    <i>Version: 1.00.1</i>
</footer>
</body>
</html>
