<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–•–∞—Ä–∞–ª—å–¥–≥—Ä–∞–¥</title>
    {% load static %}
    <link rel="stylesheet" href="/static/HGcity/css/style.css">
</head>
<body>
    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –≤—Å–µ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ -->
    <div class="container">
        <!-- –ë–ª–æ–∫ —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º -->
        <div>
            <p class="special-text-K-home">–•–ê–†–ê–õ–´–î–ì–†–ê–î</p>
        </div>

        <!-- –ù–∞—á–∞–ª—å–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ -->
        <img id="doorImage" src="{% static 'animations/doors/bunker_1.png' %}" alt="–ë—É–∫–Ω–µ—Ä" style="width: 800px; border-radius:25px;">

        <!-- –ë–ª–æ–∫ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∂–∏—Ç–µ–ª–µ–π -->
        <div>
            <p>–ö–û–õ–ò–ß–ï–°–¢–í–û –ñ–ò–¢–ï–õ–ï–ô: {{ user_count }}</p>
        </div>

        <!-- –ë–ª–æ–∫ —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π -->
        <div class="navigation-block">
            <nav>
                {% if user.is_authenticated %}
                    <!-- –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Å—ã–ª–∫–∏ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
                    <button onclick="openDoors()" style="margin-top: 10px;">–û—Ç–∫—Ä—ã—Ç—å –î–≤–µ—Ä–∏</button>
                {% else %}
                    <!-- –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Å—ã–ª–∫–∏ –¥–ª—è –≥–æ—Å—Ç–µ–π -->
                    <button onclick="window.location.href='{% url 'HGcity:register' %}'" style="margin-top: 10px;">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
                    <button onclick="window.location.href='{% url 'HGcity:login' %}'" style="margin-top: 10px;">–í—Ö–æ–¥</button>
                {% endif %}
            </nav>
        </div>

        <audio id="background-music" src="{% static 'HGcity/music/music_guide_page.mp3' %}" autoplay loop></audio>
        <button id="toggle-music" onclick="toggleMusic()">üîà  –í—ã–∫–ª. –º—É–∑—ã–∫—É</button>

        <!-- –ó–≤—É–∫ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –¥–≤–µ—Ä–µ–π -->
        <audio id="door-sound" src="{% static 'HGcity/music/doors_sound.mp3' %}"></audio>

    </div>

    <!-- –°–∫—Ä–∏–ø—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º—É–∑—ã–∫–æ–π –∏ –∑–≤—É–∫–æ–º -->
    <script>
        const audioElement = document.getElementById('background-music');
        const toggleButton = document.getElementById('toggle-music');
        const doorImage = document.getElementById('doorImage');
        const doorSound = document.getElementById('door-sound');
        let isPlaying = true;

        function toggleMusic() {
            if (isPlaying) {
                audioElement.pause();
                toggleButton.textContent = 'üîä –í–∫–ª. –º—É–∑—ã–∫—É';
            } else {
                audioElement.play();
                toggleButton.textContent = 'üîà –í—ã–∫–ª. –º—É–∑—ã–∫—É';
            }
            isPlaying = !isPlaying;
        }

        function openDoors() {
            // –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º –∑–≤—É–∫ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É
            doorSound.play();

            // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–æ–Ω–æ–≤—É—é –º—É–∑—ã–∫—É
            audioElement.pause();

            // –ú–µ–Ω—è–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ –∞–Ω–∏–º–∞—Ü–∏—é
            doorImage.src = "{% static 'animations/doors/doors_high_open.webp' %}";

            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–¥–µ—Ä–∂–∫—É –≤ 6 —Å–µ–∫—É–Ω–¥ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ—Ö–æ–¥–æ–º
            setTimeout(function() {
                window.location.href = '{% url 'HGcity:guide_page' %}';
            }, 4500);
        }
    </script>

    <!-- –§—É—Ç–µ—Ä -->
    <footer class="footer-block">
        <i>Version: 1.00.1</i>
    </footer>
</body>
</html>
