<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–•–∞—Ä–∞–ª—å–¥–≥—Ä–∞–¥</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'HGcity/css/style.css' %}">
    <link rel="icon" type="image/x-icon" href="{% static 'favicon.png' %}">



</head>
<body id="home-page">
<!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –≤—Å–µ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ -->
<div class="container">
    <!-- –ë–ª–æ–∫ —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º -->
    <div>
        <p class="special-text-K-home">–•–ê–†–ê–õ–´–î–ì–†–ê–î</p>
    </div>

    <!-- –ù–∞—á–∞–ª—å–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è -->

    <img id="lightImage" src="{% static 'animations/doors/lights.webp' %}" alt="–°–≤–µ—Ç"
         style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; object-fit: cover; z-index: 9999; display: none; opacity: 0.2;">

    <img id="doorImage" src="{% static 'animations/doors/bunker_1.png' %}" alt="–ë—É–∫–Ω–µ—Ä"
         style="width: 700px; border-radius:25px;">

    <!-- –ë–ª–æ–∫ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∂–∏—Ç–µ–ª–µ–π -->
    <div>
        <p><b style="color:#CD5C5C;">–ö–û–õ–ò–ß–ï–°–¢–í–û –ñ–ò–¢–ï–õ–ï–ô:</b> {{ user_count }}</p>
    </div>

    <!-- –ë–ª–æ–∫ —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π -->
    <div class="navigation-block">
        <nav>
            {% if user.is_authenticated %}
            <!-- –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Å—ã–ª–∫–∏ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
            <button onclick="openDoors()">–û—Ç–∫—Ä—ã—Ç—å –î–≤–µ—Ä–∏</button>
            {% else %}
            <!-- –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Å—ã–ª–∫–∏ –¥–ª—è –≥–æ—Å—Ç–µ–π -->
            <button onclick="window.location.href='{% url 'HGcity:register' %}'" style="margin-bottom: 10px;">
                –†–ï–ì–ò–°–¢–†–ê–¶–ò–Ø
            </button>
            <p></p>
            <button onclick="window.location.href='{% url 'HGcity:login' %}'" style="margin-top: 10px; font-size:14px;">
                –í–•–û–î
            </button>
            {% endif %}
        </nav>
    </div>


    <!-- –ó–≤—É–∫ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –¥–≤–µ—Ä–µ–π -->
    <audio id="door-sound" src="{% static 'HGcity/music/doors_sound.mp3' %}"></audio>
    <audio id="alarm-doors" src="{% static 'HGcity/music/alarm_doors.mp3    ' %}"></audio>

</div>
<audio id="background-music" src="{% static 'HGcity/music/music_guide_page.mp3' %}" autoplay loop></audio>

    {% if user.is_authenticated %}
    <!-- –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Å—ã–ª–∫–∏ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
    <button style="font-size:15px; margin-left:68%; margin-top:3.5%;" id="toggle-music" onclick="toggleMusic()">üîà</button>
    {% else %}
    <!-- –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Å—ã–ª–∫–∏ –¥–ª—è –≥–æ—Å—Ç–µ–π -->
    <button style="font-size:15px; margin-left:68%; margin-top:0%;" id="toggle-music" onclick="toggleMusic()">üîà</button>
    {% endif %}



<!-- –°–∫—Ä–∏–ø—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º—É–∑—ã–∫–æ–π –∏ –∑–≤—É–∫–æ–º -->
<script>
    const lightImage = document.getElementById('lightImage');
    const audioElement = document.getElementById('background-music');
    const toggleButton = document.getElementById('toggle-music');
    const doorImage = document.getElementById('doorImage');
    const doorSound = document.getElementById('door-sound');
    doorSound.volume = 0.5; // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≥—Ä–æ–º–∫–æ—Å—Ç—å –Ω–∞ 30% –æ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π
    const door_alert_Sound = document.getElementById('alarm-doors');
    door_alert_Sound.volume = 0.8; // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≥—Ä–æ–º–∫–æ—Å—Ç—å –Ω–∞ 30%

    let isPlaying = true;

    function toggleMusic() {
        if (isPlaying) {
            audioElement.pause();
            toggleButton.textContent = 'üîä';
        } else {
            audioElement.play();
            toggleButton.textContent = 'üîà';
        }
        isPlaying = !isPlaying;
    }

    function openDoors() {
        // –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º –∑–≤—É–∫ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É
        doorSound.play();
        door_alert_Sound.play();

        // –ü–æ–∫–∞–∑–∞—Ç—å –∞–Ω–∏–º–∞—Ü–∏—é —Å–≤–µ—Ç–∞ —á–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É
        setTimeout(function() {
            lightImage.style.display = 'block';
        }, 0000);

        // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–æ–Ω–æ–≤—É—é –º—É–∑—ã–∫—É
        audioElement.pause();

        // –ú–µ–Ω—è–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ –∞–Ω–∏–º–∞—Ü–∏—é
        doorImage.src = "{% static 'animations/doors/doors_high_open.webp' %}";

        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–¥–µ—Ä–∂–∫—É –≤ 6 —Å–µ–∫—É–Ω–¥ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ—Ö–æ–¥–æ–º
        setTimeout(function() {
            window.location.href = '{% url 'HGcity:guide_page' %}';
        }, 4500);
    }
</script>

<!-- –§—É—Ç–µ—Ä -->
<footer class="footer-block">
    <i>Version: 1.00.1</i>
</footer>
</body>
</html>
